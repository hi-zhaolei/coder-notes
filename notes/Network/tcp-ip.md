# TCP/IP

HTTP协议就属于TCP/IP协议, 不同国家的人使用不同的语言交流，就是一种协议，只不过我们称之为语言。因为协议的存在，计算机之间才能正确通信。

## 五层模型

互联网的实现，分成好几层。每一层都有自己的功能，就像建筑物一样，每一层都靠下一层支持。

用户接触到的，只是最上面的一层，根本没有感觉到下面的层。要理解互联网，必须从最下层开始，自下而上理解每一层的功能。

![](http://image.beekka.com/blog/201205/bg2012052902.png)

上图中: 越下面的层，越靠近硬件；越上面的层，越靠近用户。

每一层都是为了完成一种功能。为了实现这些功能，就需要大家都遵守共同的规则。

大家都遵守的规则，就叫做"协议"（protocol）。

互联网的每一层，都定义了很多协议。这些协议的总称，就叫做"互联网协议"（Internet Protocol Suite）。

## 实体层

电脑要组网，第一件事要先把电脑连起来，可以用光缆、电缆、双绞线、无线电波等方式。这就叫做"实体层"，它就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送0和1的电信号。

## 链接层

链接层的功能，是确定实体层传输过来的0和1的分组方式，这种分组方式就是一种协议。

### 以太网协议

协议规定，一组电信号构成一个数据包，叫做"帧"（Frame）。每一帧分成两个部分：标头（Head）和数据（Data）。

![Ethernet protocol](http://image.beekka.com/blog/201205/bg2012052904.png)

"Head"包含数据包的一些说明项，比如发送者、接受者、数据类型等等，"Head"的长度，固定为18字节。

"Data"则是数据包的具体内容。"Data"的长度，最短为46字节，最长为1500字节。

整个"帧"最短为64字节，最长为1518字节。如果数据很长，就必须分割成多个帧进行发送。

### MAC地址

规定所有连入网络的所有设备，都必须具有"网卡"接口，数据必须是通过网卡交换的。网卡的地址就是**MAC地址**。

每块网卡出厂的时候，都有一个全世界独一无二的MAC地址，长度是48个二进制位，通常用12个十六进制数表示。

前6个十六进制数是厂商编号，后6个是该厂商的网卡流水号。

### 广播

以太网数据包必须知道接收方的MAC地址，而网卡通过ARP协议知道另一块网卡的MAC地址。

知道地址后向本网络内所有计算机发送，让每台计算机自己判断，是否为接收方，通过这样把数据包准确送到接收方。

![broadcasting](http://image.beekka.com/blog/201205/bg2012052907.png)

网络内计算机都会读取这个包的"标头"，找到接收方的MAC地址，然后与自身的MAC地址相比较，如果两者相同，就接受这个包，做进一步处理，否则就丢弃这个包。这种发送方式就叫做**"广播"（broadcasting）**。