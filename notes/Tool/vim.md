# Vim

## 进入vim

| 命令            | 描述                                |
| --------------- | ----------------------------------- |
| vim filename    | 打开或新建文件,并将光标置于第一行首 |
| vim +n filename | 打开文件，并将光标置于第n行首       |
| vim + filename  | 打开文件，并将光标置于最后一行首    |

## 移动光标

| 命令      | 描述                                          |
| --------- | --------------------------------------------- |
| [n]k      | 上 向上移动n行                                |
| [n]j      | 下 向下移动n行                                |
| [n]h      | 左 向左移动n行                                |
| [n]l      | 右 向右移动n行                                |
| Space     | 光标右移一个字符                              |
| Backspace | 光标左移一个字符                              |
| Enter     | 光标下移一行                                  |
| w/W       | 光标右移一个字至字首                          |
| b/B       | 光标左移一个字至字首                          |
| e或E      | 光标右移一个字至字尾                          |
| )         | 光标移至句尾                                  |
| (         | 光标移至句首                                  |
| }         | 光标移至段落开头                              |
| {         | 光标移至段落结尾                              |
| [n]$      | 光标移至第n行尾                               |
| H         | 光标移至屏幕顶行                              |
| M         | 光标移至屏幕中间行                            |
| L         | 光标移至屏幕最后行                            |
| 0         | （注意是数字零）光标移至当前行首              |
| ^         | 移动光标到行首第一个非空字符上去              |
| $         | 光标移至当前行尾                              |
| gg        | 移到第一行                                    |
| G         | 移到最后一行                                  |
| nG        | 移动到第n行上                                 |
| f         | 移动光标到当前行的字符a上，从当前位置向后查找 |
| F         | 移动光标到当前行的字符a上，从当前位置向前查找 |
| %         | 移动到与制匹配的括号上去（），{}，[]，<>等    |

## 屏幕滚动

| 命令      | 描述                                               |
| --------- | -------------------------------------------------- |
| command+u | 向下翻半屏                                         |
| command+d | 向上翻半屏                                         |
| command+f | 向下翻一屏                                         |
| command+b | 向上翻一屏                                         |
| nz        | 将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部 |

## 插入文本类

| 命令 | 描述                                                 |
| ---- | ---------------------------------------------------- |
| i    | 在当前光标输入                                       |
| I    | 当前行首输入                                         |
| a    | 光标后输入                                           |
| A    | 当前行尾输入                                         |
| o    | 新增下一行，进入输入模式                             |
| O    | 新增上一行，进入输入模式                             |
| r    | 替换当前字符                                         |
| R    | 替换当前字符及其后的字符，直至按ESC键                |
| s    | 从当前光标位置处开始，以输入的文本替代指定数目的字符 |
| S    | 删除指定数目的行，并以所输入文本代替之               |
| cw   | 删除当前单词，进入输入模式                           |

## 删除命令

| 命令      | 描述                                             |
| --------- | ------------------------------------------------ |
| x/X       | 删除一个字符，x删除光标后的，而X删除光标前的     |
| d[n]w     | 删除一个单词(删除光标位置到下一个单词开始的位置) |
| d[n]e     | 删除到单词尾                                     |
| do        | 删至行首                                         |
| d$        | 删至行尾                                         |
| [n]dd     | 删除行，n为删除行个数                            |
| dnj       | 向下删除n行,当前行+其上n行                       |
| dnk       | 向上删除n行,当期行+其下n行                       |
| cnw[word] | 将n个word改变为word                              |
| C$        | 改变到行尾                                       |
| cc        | 改变整行                                         |
| shift+j   | 删除行尾的换行符，下一行接上来了                 |

## 复制粘贴

| 命令  | 描述                 |
| ----- | -------------------- |
| p     | 粘贴用x或d删除的文本 |
| y[n]w | 复制n个单词          |
| yy    | 复制一行             |
| y[n]l | 复制n个字符          |
| y$    | 复制当前光标至行尾处 |
| nyy   | 拷贝n行              |

## 撤销

| 命令      | 描述                 |
| --------- | -------------------- |
| u         | 撤销前一次的操作     |
| shif+u(U) | 撤销对该行的所有操作 |

## 搜索及替换

| 命令                     | 描述                                                 |
| ------------------------ | ---------------------------------------------------- |
| /pattern                 | 从光标开始处向文件尾搜索pattern                      |
| ?pattern                 | 从光标开始处向文件首搜索pattern                      |
| n                        | 在同一方向重复上一次搜索命令                         |
| N                        | 在反方向上重复上一次搜索命令                         |
| cw newword               | 替换为newword                                        |
| n                        | 继续查找                                             |
| .                        | 执行替换                                             |
| :s/p1/p2/g               | 将当前行中所有p1均用p2替代,g表示执行 用c表示需要确认 |
| :n1,n2 s/p1/p2/g         | 将第n1至n2行中所有p1均用p2替代                       |
| :g/p1/s//p2/g            | 将文件中所有p1均用p2替换                             |
| :1,$ s/string1/string2/g | 在全文中将string1替换为string2                       |

## 书签

| 命令   | 描述                                  |
| ------ | ------------------------------------- |
| m[a-z] | 在文中做标记，标记号可为a-z的26个字母 |
| `a     | 移动到标记a处                         |

## visual模式

| 命令   | 描述                                   |
| ------ | -------------------------------------- |
| v      | 进入visual 模式                        |
| V      | 进入行的visual 模式                    |
| ctrl+v | 进如块操作模式用o和O改变选择的边的大小 |

## 行方式命令

| 命令         | 描述                                 |
| ------------ | ------------------------------------ |
| :n1,n2 co n3 | 将n1行到n2行之间的内容拷贝到第n3行下 |
| :n1,n2 m n3  | 将n1行到n2行之间的内容移至到第n3行下 |
| :n1,n2 d     | 将n1行到n2行之间的内容删除           |

## 窗口操作

| 命令           | 描述                                     |
| -------------- | ---------------------------------------- |
| :split         | 分割一个窗口                             |
| :split file.c  | 为另一个文件file.c分隔窗口               |
| :nsplit file.c | 为另一个文件file.c分隔窗口，并指定其行数 |
| ctrl＋w        | 在窗口中切换                             |
| :close         | 关闭当前窗口                             |

## 文件及其他

| 命令        | 描述                                 |
| ----------- | ------------------------------------ |
| :q          | 退出vi                               |
| :q!         | 不保存文件并退出vi                   |
| :e filename | 打开文件filename进行编辑             |
| :e!         | 放弃修改文件内容，重新载入该文件编辑 |
| :w          | 保存当前文件                         |
| :wq         | 存盘退出                             |
| :ZZ         | 保存当前文档并退出VIM                |
| :!command   | 执行shell命令command                 |
| :r!command  | 将命令command的输出结果放到当前行    |